!function(t){"use strict";var e="tap,touchstart,touchmove,touchend,click,mousedown,mousemove,mouseup,pointertap,pointerdown,pointermove,pointerup".split(","),i=function(){this.events=null,this.slots=null};function n(t,e,i){return o(t,e,null,i)}function o(e,n,o,h){var c=new i;if(e._oixi_=c,h){var u=h();s(e,u),o&&(c.slots=o,function(t,e){var i=a(e);if(!i)throw Error("oixi: no #slot in template");s(i,t)}(o,u)),l(u,e)}else o&&(c.slots=o,s(e,o));return n&&function(e,i){function n(t){return t.substring(1)}var o=r(i);e.split(" ").forEach((function(e){if(e)switch(e.charAt(0)){case"#":i.name=n(e);break;case"@":o.events||(o.events=[]),o.events.push(n(e));break;default:for(var r=e.split("="),s=r[0].split("."),a=Number(r[1]),l=s.length,h=i,c=0;c<l;c++){var u=s[c];if(!h||!(u in h))throw Error("oixi: Property "+r[0]+" is not in "+i.constructor.name);c==l-1?h[u]instanceof t.ObservablePoint?h[u].set(a):h[u]=a:h=h[u]}}}))}(n,e),e}function r(t){return t._oixi_?t._oixi_:null}function s(t,e){e.forEach((function(e){t.addChild(e)}))}function a(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if("slot"===n.name)return n;var o=r(n);if(o&&o.slots){var s=a(o.slots);if(s)return s}}return null}function l(t,e){for(var i=0,n=t.length;i<n;i++){var o=t[i],s=r(o);if(s){var a=o.name;a&&(a in e?Array.isArray(e[a])?e[a].push(o):e[a]=o:"slot"!=a&&console.warn("oixi: no member match "+a)),s.events&&h(o,s.events,e),s.slots&&l(s.slots,e),delete o._oixi_}}}function h(t,i,n){i.forEach((function(i){var o=i.split("="),r=o[0],s=o[1],a=n[s];if(!a)throw Error("oixi: Function "+s+" is undefined");e.includes(r)&&(t.interactive=!0),t.on(r,a,n)}))}function c(e,i){var n=new t.Container;return i?o(n,e,i):"string"==typeof e?o(n,e):o(n,null,e),n}function u(e){return o(new t.Graphics,e)}function p(e,i,n){var r,s=null;return n?(s=n,r=t.Texture.from(i)):i&&("string"==typeof i?r=t.Texture.from(i):s=i),o(r?new t.Sprite(r):new t.Sprite,e,s)}var f={};function d(e,i,n){var r=f,s="";return n?(s=i,r=Object.assign({},f,n)):i&&("string"==typeof i?s=i:r=Object.assign({},f,i)),o(new t.Text(s,r),e)}var g=Math.ceil,v=Math.floor,y=Math.round,b=Math.random,x=Math.abs;function m(t,e,i){void 0===i&&(i=1);for(var n=[],o=0;o<e;o++)n.push(t+o*i);return n}var w=0,_=0;function k(t,e){return t<1&&t>-1&&0!=t?y(e*t):t}var L=function(t,e,i){this.width=e,this.height=i,this.target=t;var n=0,o=0;t.isSprite&&(n=t.anchor.x*t.width,o=t.anchor.y*t.height),this.offsetX=n+t.pivot.x,this.offsetY=o+t.pivot.y};function S(t,e,i){return void 0===e&&(e=w),void 0===i&&(i=_),new L(t,e,i)}L.prototype.top=function(t){return void 0===t&&(t=0),this.target.y=k(t,this.height)+this.offsetY,this},L.prototype.bottom=function(t){void 0===t&&(t=0);var e=k(t,this.height);return this.target.y=this.height-(e+this.target.height)+this.offsetY,this},L.prototype.left=function(t){return void 0===t&&(t=0),this.target.x=k(t,this.width)+this.offsetX,this},L.prototype.right=function(t){void 0===t&&(t=0);var e=k(t,this.width);return this.target.x=this.width-(e+this.target.width)+this.offsetX,this},L.prototype.center=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.centerX(t).centerY(e)},L.prototype.centerX=function(t){void 0===t&&(t=0);var e=k(t,this.width);return this.target.x=y((this.width-this.target.width)/2)+e+this.offsetX,this},L.prototype.centerY=function(t){void 0===t&&(t=0);var e=k(t,this.height);return this.target.y=y((this.height-this.target.height)/2)+e+this.offsetY,this};var C,T,P,R=[],A={};function D(t,e){if(R.length&&t==R[R.length-1])console.warn("repeat router: "+t);else{R.push(t);var i=A[t];if(!i){var n=T[t];if(!n)throw Error("no route: "+t);i=n(),A[t]=i}C.addChild(i),P&&(P.deactived&&P.deactived(),C.removeChild(P)),i.actived&&i.actived(e),P=i}}function O(){if(R.length>1){R.pop();var t=R[R.length-1],e=A[t];P.deactived&&P.deactived(),C.addChild(e),C.removeChild(P),e.reactived&&e.reactived(),P=e}}var E,F=window.innerWidth,I=window.innerHeight;E=F/I>.6?960:v(I/F*540);var M=540,W=E,j=16088064,B=16728576,z=16777215,H=[8550167,15690752,5606191,166097,6765239,15022389,10233776,2001125,5533306,3754411,14162784,7951688],X=function(t){return t},q=function(t){return--t*t*(2.7*t+1.7)+1},Y=function(t){return Math.sin(t*Math.PI/2)},G=function(t,e,i){this.start=0,this.props=t,this.duration=e,this.ease=i},V=function(t,e,i){this.index=0,this.tweenItems=[],this.isComplete=!1,this.target=t,this.isLoop=e,this.isKeep=i};V.prototype.to=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=X),this.tweenItems.push(new G(t,e,i)),this},V.prototype.wait=function(t){return this.tweenItems.push(new G(null,t,null)),this},V.prototype.onComplete=function(t){return this.complete=t,this},V.prototype.onChange=function(t){return this.change=t,this},V.prototype.destory=function(){this.isLoop=!1,this.isComplete=!0,this.complete=null,this.change=null,this.tweenItems=null};var N=[];function K(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),e&&i)throw Error("cannot be set 'loop' and 'keep' to true at the same time");var n=new V(t,e,i);return N.push(n),n}window.requestAnimationFrame((function t(){if(N.length){for(var e=[],i=Date.now(),n=0;n<N.length;n++){var o=N[n];if(!o.isLoop&&o.isComplete)e.push(o);else if(o.tweenItems.length){var r=o.tweenItems[o.index];if(0==r.start&&(r.start=i,r.props))for(var s in r.propsOriginValue={},r.props)r.propsOriginValue[s]=o.target[s];var a=Math.min(1,(i-r.start)/r.duration);if(r.props){for(var l in r.props)o.target[l]=(c=r.propsOriginValue[l],u=r.props[l],p=r.ease(a),c*(1-p)+u*p);o.change&&o.change()}1===a&&(o.index++,o.index>=o.tweenItems.length&&(o.isLoop?(o.index=0,o.tweenItems.forEach((function(t){return t.start=0}))):o.isKeep&&(o.index=0,o.tweenItems.length=0),o.complete&&o.complete(),o.isLoop||o.isKeep||o.destory()))}}for(var h=0;h<e.length;h++)N.splice(N.indexOf(e[h]),1)}var c,u,p;window.requestAnimationFrame(t)}));var U="cn",J={};function Q(t){U=t}function Z(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=J[t];if(!n)return console.error("no lang key: "+t),"";var o=n[U].replace(/\\n/g,"\n");if(e.length)for(var r=0;r<e.length;r++)o=o.replace("{"+r+"}",e[r]);return o}function $(t){return localStorage.getItem(t)}function tt(t,e){localStorage.setItem(t,e)}var et=function(){},it={level:{configurable:!0},life:{configurable:!0},locale:{configurable:!0}};et.prototype.init=function(){if(this._level=Number($("level")||1),this._life=Number($("life")||3),this._locale=$("locale"),this._locale)Q(this._locale);else{var t,e=navigator.language;t="zh-CN"==e?"cn":0==e.indexOf("zh")?"tw":"en",this.locale=t}},it.level.set=function(t){this._level=t,tt("level",t.toString())},it.level.get=function(){return this._level},it.life.set=function(t){this._life=t,tt("life",t.toString())},it.life.get=function(){return this._life},it.locale.set=function(t){this._locale=t,Q(t),tt("locale",t)},it.locale.get=function(){return this._locale},Object.defineProperties(et.prototype,it);var nt=new et;function ot(t,e,i){return n(new rt(i),t,(function(){return[d("anchor=0.5 x=50 y=40",e,{fontSize:24})]}))}var rt=function(e){function i(i){e.call(this,t.Texture.from("btn_lang_a.png")),this.interactive=!0,this._id=i}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var n={id:{configurable:!0}};return n.id.get=function(){return this._id},i.prototype.select=function(e){var i=e?"btn_lang_b.png":"btn_lang_a.png";this.texture=t.Texture.from(i)},Object.defineProperties(i.prototype,n),i}(t.Sprite);var st=function(t){function e(){t.apply(this,arguments),this.box=null,this.btns=[],this.labPolicy=null,this.info=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(){this.box.scale.set(0),K(this.box.scale).to({x:1,y:1},300,q),this.visible=!0},e.prototype.onTap=function(){},e.prototype.onClose=function(){this.visible=!1},e.prototype.onChangeLang=function(t){var e=t.target;if(e.id){var i=e.id;i!=nt.locale&&(nt.locale=i,this.emit("lang")),this.onClose()}},e.prototype.updateLabel=function(){this.btns.forEach((function(t){return t.select(t.id==nt.locale)})),this.labPolicy.text=Z("policy"),this.info.text=Z("info")},e}(t.Container);function at(){return n(new lt,null,(function(){return[p("y="+(W-662),"bg_home.png"),S(p("#btnPlay @pointertap=onLevelList","play.png")).bottom(127).centerX(3).target,p("#title y=150"),p("#btnSetting x=460 y=15 @pointertap=onSetting","btn_setting.png"),(t="#setting visible=0 @lang=onChangeLang",n(new st,t,(function(){return[u("@pointertap=onClose").beginFill(0,.5).drawRect(0,0,M,W).endFill(),c("#box pivot.x=215 pivot.y=280 x=270 y="+W/2,[u().beginFill(z).drawRoundedRect(0,0,430,470,10).endFill(),d("#info anchor.x=0.5 x=215 y=40",{fill:0,fontSize:30,align:"center",lineHeight:50}),c("x=32 y=240 @pointertap=onChangeLang",[ot("#btns","简体","cn"),ot("#btns x=130","繁体","tw"),ot("#btns x=260","English","en")]),p("@pointertap=onTap x=32 y=350","btn_replay.png",[d("#labPolicy anchor=0.5 x=182 y=40","Privacy Policy",{fontSize:30})])])]})))];var t})).created()}var lt=function(e){function i(){e.apply(this,arguments),this.btnPlay=null,this.btnSetting=null,this.setting=null,this.title=null}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.created=function(){return this.onChangeLang(),this},i.prototype.onChangeLang=function(){this.setting.updateLabel();var e="en"==nt.locale?"title_en.png":"title_cn.png";this.title.texture=t.Texture.from(e)},i.prototype.onSetting=function(){this.setting.show()},i.prototype.onLevelList=function(){D("Level")},i.prototype.reactived=function(){this.btnPlay.y=W,K(this.btnPlay).to({y:W-332},300,Y),this.btnSetting.x=M,K(this.btnSetting).to({x:460},300,Y)},i}(t.Container);var ht=function(e){function i(){e.call(this,t.Texture.from("level_item.png")),this.label=null}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var n={id:{configurable:!0}};return i.prototype.updateId=function(t,e){this._id=t,this.label.text=t.toString(),this.interactive=e,this.alpha=e?1:.5},n.id.get=function(){return this._id},Object.defineProperties(i.prototype,n),i}(t.Sprite),ct=[null,{column:9,data:[3,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,2,1,1,1,1,1,1,1,2,1,0,0,0,0,0,0,0,1,5,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,2,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,4]},{column:9,data:[3,0,0,0,0,0,0,0,0,2,1,1,1,2,1,1,1,2,1,0,0,0,1,0,0,0,1,5,0,0,0,1,0,0,0,1,2,1,1,1,2,1,1,1,2,1,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,1,2,1,1,1,2,1,1,1,2,0,0,0,0,0,0,0,0,4]},{column:9,data:[2,1,1,2,1,1,2,0,3,1,0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,2,1,1,2,1,1,2,0,1,1,0,0,1,0,0,0,0,5,1,0,0,2,1,1,2,1,2,1,0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,4,0,0,2,1,1,2,1,2]},{column:9,data:[2,1,1,2,1,2,1,0,1,1,0,0,1,0,1,0,0,1,2,1,1,2,1,2,1,1,2,1,0,0,1,0,1,0,0,1,1,0,0,1,0,1,0,0,1,2,1,1,2,1,2,1,1,2,1,0,0,1,0,1,0,0,1,1,0,0,5,0,1,0,0,1,2,3,1,2,1,2,1,0,4]},{column:14,data:[2,1,1,1,1,1,1,2,1,1,1,1,1,2,1,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,2,1,1,1,2,1,1,2,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,2,3,0,0,1,0,0,1,2,1,1,2,0,0,1,0,0,0,2,1,1,2,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,0,1,0,0,2,1,1,1,2,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,1,4,0,0,5,0,0,0,0,0,0,0,0,0,1,1,0,0,2,1,1,1,1,1,1,1,1,1,2]},{column:14,data:[2,1,1,1,2,0,0,0,2,1,1,1,1,2,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,2,1,1,1,2,1,1,1,2,1,1,1,1,2,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,4,0,0,0,5,0,0,0,0,1,2,1,1,1,2,1,1,1,2,1,1,1,1,2,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,1,1,0,2,1,1,1,2,0,0,0,0,3]},{column:14,data:[2,1,1,2,1,0,2,1,1,2,1,1,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,2,1,1,2,1,0,1,0,1,2,1,1,1,2,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,5,2,1,1,2,0,1,2,1,1,2,0,1,1,2,1,0,0,1,0,0,3,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,2,1,1,2,1,1,1,1,1,2,1,1,1,2,1,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,4,0,0,0,0,0,1,0,0,1,0,0,0,1,2,1,1,1,1,1,2,1,1,2,0,1,1,2]},{column:14,data:[2,1,1,2,1,1,2,1,1,2,1,1,1,2,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,2,1,1,2,1,1,2,1,1,2,1,1,1,2,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,5,0,0,1,0,0,0,4,2,1,1,2,1,1,2,1,1,2,1,1,1,2,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,2,1,1,2,1,1,2,1,1,2,1,1,1,2,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,2,3,1,2,1,1,2,1,1,2,1,1,1,2]},{column:20,data:[2,1,1,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,2,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,2,1,1,1,1,2,0,0,0,0,2,1,1,1,2,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,4,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,5,2,1,1,1,1,2,0,0,0,0,2,1,1,1,1,2,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,2,1,1,1,1,2,0,0,0,0,2,1,1,1,2,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,5,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,2,1,3,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,2]},{column:20,data:[2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,2,1,1,1,1,1,1,2,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,0,5,0,0,1,0,0,0,0,0,0,1,0,0,2,1,1,2,2,1,1,2,0,0,2,1,1,2,1,2,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,5,0,0,1,1,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,3,1,2,0,0,2,1,1,2,2,1,1,2,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,2,1,1,2,1,2,1,1,1,1,2,0,0,1,1,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,4,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,2,1,1,2,0,0,2,1,1,1,1,2,1,1,1,1,2,1,1,2]},{column:20,data:[2,1,1,1,1,1,1,2,0,0,0,0,2,1,1,1,1,1,1,2,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,2,1,1,1,2,1,1,1,1,2,1,1,1,2,0,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,2,1,1,2,1,1,1,2,1,1,1,1,2,1,1,1,2,1,1,2,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,4,0,0,0,0,5,0,0,0,1,0,0,0,2,1,1,2,1,1,1,2,1,1,1,1,2,1,1,1,2,1,1,2,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,2,1,1,1,2,1,1,1,1,2,1,1,1,2,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,5,0,0,0,0,1,0,0,0,0,0,0,1,2,1,1,1,1,1,1,2,0,0,0,0,2,1,1,1,1,1,1,3]},{column:20,data:[2,1,1,1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,2,1,2,1,1,1,1,2,1,1,1,1,1,2,1,2,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,2,1,2,0,2,1,1,1,1,2,1,1,1,1,1,2,0,2,1,2,1,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,1,0,1,0,1,0,2,1,1,2,1,1,1,2,0,1,0,5,0,1,1,0,1,0,1,0,1,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,2,1,1,2,0,1,0,1,0,1,0,1,2,1,2,0,2,1,2,0,1,0,0,1,0,2,1,2,0,2,1,2,1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,2,3,0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,0,0,1,0,5,0,1,0,1,0,1,1,0,1,0,1,0,2,1,1,2,0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,0,0,0,1,0,1,0,0,0,1,0,1,0,1,2,1,2,0,2,1,1,1,1,2,0,2,1,1,1,2,0,2,1,2,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,2,1,1,1,1,2,0,1,1,1,1,2,1,2,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,4,2,1,1,1,1,1,1,1,1,2,0,1,1,1,1,2,1,1,1,2]}];function ut(){return n(new pt,null,(function(){return[p("y="+(W-285),"bg_level.png"),S(p("#btnPlay @pointertap=onPlay","play.png")).centerX(3).target,p("#btnBack @pointertap=onBack y=15","btn_back.png"),p("#btnLife @pointertap=onWatch y=15 x=410","btn_life.png",[d("#life x=75 y=14",{fill:B,fontSize:40})]),S(c([p("#btnLeft @pointertap=onLeft y=190 x=20","level_left.png"),p("#btnRight @pointertap=onRight y=190 x=477","level_right.png"),c("#items @pointertap=onSelectLevel x=100",m(0,12).map((function(t){var e,i=t%3*130,o=120*v(t/3);return e="x="+i+" y="+o,n(new ht,e,(function(){return[d("#label x=40 y=40 anchor=0.5","0",{fill:j,fontSize:36})]}))})))])).centerY(-70).target]}))}var pt=function(t){function e(){t.apply(this,arguments),this.btnPlay=null,this.btnBack=null,this.btnLife=null,this.btnLeft=null,this.btnRight=null,this.items=null,this.life=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.actived=function(){this.updateLevelList()},e.prototype.reactived=function(){this.updateLevelList()},e.prototype.updateLevelList=function(){this.life.text=nt.life.toString(),this.btnBack.x=-85,K(this.btnBack).to({x:0},300,Y),this.btnLife.x=M,K(this.btnLife).to({x:410},300,Y),this.btnPlay.y=W,K(this.btnPlay).to({y:W-260},300,Y),this.currentPage=g(nt.level/12),this.updateLevelPage()},e.prototype.onBack=function(){O()},e.prototype.onPlay=function(){D("World",nt.level)},e.prototype.onWatch=function(){},e.prototype.onLeft=function(){this.currentPage--,this.updateLevelPage()},e.prototype.onRight=function(){this.currentPage++,this.updateLevelPage()},e.prototype.onSelectLevel=function(t){var e=t.target;e.id&&D("World",e.id)},e.prototype.updateLevelPage=function(){var t=this.currentPage,e=nt.level;this.btnLeft.visible=1!=t,this.btnRight.visible=12*t<12,this.items.children.forEach((function(i,n){var o=12*(t-1)+n+1;i.updateId(o,o<=e)}))},e}(t.Container),ft=function(e){function i(i,n,o){e.call(this),this.skinCount=0,this.isSkin1=!0,this.shadow=new t.Graphics,this.shadow.beginFill(0,.3).drawCircle(6,6,30).endFill(),this.addChild(this.shadow),this.skin=new t.Sprite,this.skin.pivot.set(40),this.addChild(this.skin),this.runSpeed=n,this.rotateSpeed=o,this.changeSkin(i)}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var n={terrain:{configurable:!0},runing:{configurable:!0},index:{configurable:!0},originDirect:{configurable:!0},skinAngle:{configurable:!0}};return i.prototype.reset=function(t,e){var i=t%e*80+40,n=80*v(t/e)+40;this.position.set(i,n),this._index=t,this.direct=0,this._terrain=1,this._runing=!1,this.pauseRound=!1,this.prepareDest=null,this.skin.angle=0,this.changeToSkin1()},i.prototype.changeSkin=function(e){this.skinResource=e,this.skin.texture=t.Texture.from(e+"_1.png")},i.prototype.runTo=function(t){this._runing=!0,this._index=t.index,this.direct=t.direct,this.target=t.target,this._terrain=t.terrain;var e=90*this.direct;this.skin.angle-e>180&&(this.skin.angle-=360),this.tweenAngle&&this.tweenAngle.destory(),this.tweenAngle=K(this.skin).to({angle:e},300)},i.prototype.chooseDirect=function(){this._originDirect=this.direct,this.skin.angle>315||this.skin.angle<=45?this.direct=0:this.skin.angle>45&&this.skin.angle<=135?this.direct=1:this.skin.angle>135&&this.skin.angle<=225?this.direct=2:this.skin.angle>225&&this.skin.angle<=315&&(this.direct=3)},i.prototype.hitTheWall=function(){var t,e,i,n,o,r,s,a=this;this.pauseRound||(this.pauseRound=!0,0==this.direct?(o=(n=this.y)+20,r=n-20,s="y"):2==this.direct?(o=(n=this.y)-20,r=n+20,s="y"):3==this.direct?(o=(n=this.x)+20,r=n-20,s="x"):1==this.direct&&(o=(n=this.x)-20,r=n+20,s="x"),this.tweenHit&&this.tweenHit.destory(),this.tweenHit=K(this.position).to((t={},t[s]=o,t),50).to((e={},e[s]=r,e),80).to((i={},i[s]=n,i),50).onComplete((function(){return a.pauseRound=!1})))},i.prototype.goRound=function(){return!!this.pauseRound||2==this._terrain&&!this.runing&&(this.skin.angle+=this.rotateSpeed,this.skin.angle>=360&&(this.skin.angle=0),this.isSkin1||this.changeToSkin1(),!0)},i.prototype.run=function(){0==this.direct?this.y>this.target?this.y-=this.runSpeed:this._runing=!1:2==this.direct?this.y<this.target?this.y+=this.runSpeed:this._runing=!1:3==this.direct?this.x>this.target?this.x-=this.runSpeed:this._runing=!1:1==this.direct&&(this.x<this.target?this.x+=this.runSpeed:this._runing=!1)},i.prototype.playMovice=function(){this.skinCount++,this.isSkin1?this.skinCount>12&&this.changeToSkin2():this.skinCount>12&&this.changeToSkin1()},i.prototype.changeToSkin1=function(){this.skinCount=0,this.isSkin1=!0,this.skin.texture=t.Texture.from(this.skinResource+"_1.png"),this.skin.scale.set(1),this.shadow.scale.set(1)},i.prototype.changeToSkin2=function(){this.skinCount=0,this.isSkin1=!1,this.skin.texture=t.Texture.from(this.skinResource+"_2.png"),this.skin.scale.set(1.06),this.shadow.scale.set(.98)},i.prototype.release=function(){this.tweenHit&&this.tweenHit.destory(),this.tweenAngle&&this.tweenAngle.destory(),this.destroy({children:!0})},n.terrain.get=function(){return this._terrain},n.runing.get=function(){return this._runing},n.index.get=function(){return this._index},n.originDirect.get=function(){return this._originDirect},n.skinAngle.get=function(){return this.skin.angle},Object.defineProperties(i.prototype,n),i}(t.Container);function dt(t,e,i,n){return{index:t,terrain:e,target:i,direct:n}}function gt(t,e,i){var n,o=t.index,r=t.direct;if(0==r){var s=o-i,a=e[s];s>=0&&a&&(n=dt(s,a,80*v(s/i)+40,0))}else if(2==r){var l=o+i,h=e[l];l<e.length&&h&&(n=dt(l,h,80*v(l/i)+40,2))}else if(3==r){var c=o-1,u=e[c];o%i>0&&u&&(n=dt(c,u,c%i*80+40,3))}else if(1==r){var p=o+1,f=e[p];o%i<i-1&&f&&(n=dt(p,f,p%i*80+40,1))}return n}function vt(t,e,i){var n,o=t.index,r=t.direct;if(0==r){var s=o+i,a=e[s];s<e.length&&a&&(n=dt(s,a,80*v(s/i)+40,2))}else if(2==r){var l=o-i,h=e[l];l>=0&&h&&(n=dt(l,h,80*v(l/i)+40,0))}else if(3==r){var c=o+1,u=e[c];o%i<i-1&&u&&(n=dt(c,u,c%i*80+40,1))}else if(1==r){var p=o-1,f=e[p];o%i>0&&f&&(n=dt(p,f,p%i*80+40,3))}return n}var yt=function(e){function i(){e.apply(this,arguments),this.box=null,this.boxAnimal=null,this.cats=[]}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.created=function(){return this.position.set(v(270),v(W/2)),this},i.prototype.rotateMap=function(t){var e=this,i=t.direct-t.originDirect,n=-1;-1==i||3==i?n=this.angle+45:1!=i&&-3!=i||(n=this.angle-45),-1!=n&&K(this).to({angle:n},600,Y).onComplete((function(){360!=n&&-360!=n||(e.angle=0)}))},i.prototype.replay=function(){var t=this;this.angle=0,this.rat.reset(this.initData.rat,this.column),this.initData.cats.forEach((function(e,i){t.cats[i].reset(e,t.column)}))},i.prototype.createMap=function(e){var i=this;this.angle=0,this.levelData=e;var n=e.data,o=e.column;this.column=o,this.initData=function(t){for(var e={rat:0,cats:[]},i=0;i<t.length;i++)4==t[i]?e.rat=i:5==t[i]&&e.cats.push(i);return e}(n),function(e,i,n){for(var o=["","tile_road.png","tile_round.png","tile_win.png","tile_road.png","tile_road.png"],r=0;r<i.length;r++){var s=i[r];if(s){var a=r%n*80,l=80*v(r/n),h=t.Sprite.from(o[s]);h.position.set(a,l),e.addChild(h)}}}(this.box,n,o),this.rat=new ft("rat",6,6),this.rat.reset(this.initData.rat,this.column),this.initData.cats.forEach((function(t){var e=new ft("cat",4,6);e.reset(t,i.column),i.cats.push(e)})),this.boxAnimal.addChild(this.rat),this.cats.forEach((function(t){i.boxAnimal.addChild(t)})),this.pivot.set(this.rat.x,this.rat.y)},i.prototype.changeDirect=function(){if(this.rat.runing){var t=vt(this.rat,this.levelData.data,this.column);t&&this.rat.runTo(t)}else{this.rat.chooseDirect();var e=gt(this.rat,this.levelData.data,this.column);e?(this.rotateMap(this.rat),this.rat.runTo(e)):this.rat.hitTheWall()}},i.prototype.checkIsGameOver=function(){for(var t=this.rat,e=0;e<this.cats.length;e++){var i=this.cats[e],n=x(i.x-t.x),o=x(i.y-t.y);if(n<60&&o<60)return!0}return!1},i.prototype.run=function(){if(this.checkIsGameOver())this.emit("over");else{var t=this.rat,e=this.cats,i=this.levelData.data,n=this.column;if(!t.goRound()){if(!t.runing){if(3==t.terrain)return void this.emit("win");var o=gt(t,i,n);o||(o=vt(t,i,n)),o&&t.runTo(o)}t.runing&&t.run(),t.playMovice()}e.forEach((function(e){if(!e.runing){var o=function(t,e,i,n){for(var o=t.index,r=e.index,s=o-n;s>0&&i[s];){if(s==r)return 0;s-=n}for(s=o+n;s<i.length&&i[s];){if(s==r)return 2;s+=n}var a=v(o/n);for(s=o-1;v(s/n)==a&&i[s];){if(s==r)return 3;s-=1}for(s=o+1;v(s/n)==a&&i[s];){if(s==r)return 1;s++}return-1}(e,t,i,n);if(e.prepareDest&&(-1==o||e.prepareDest.direct==o)){e.goRound();var r=e.skinAngle>=330?360-e.skinAngle:e.skinAngle;x(r-90*e.prepareDest.direct)<45&&(e.runTo(e.prepareDest),e.prepareDest=null)}else if(2==e.terrain){for(var s,a=function(t,e,i){var n=t.index,o=n-i,r=n+i,s=n-1,a=n+1,l=[];return o>=0&&e[o]&&l.push(dt(o,e[o],80*v(o/i)+40,0)),r<e.length&&e[r]&&l.push(dt(r,e[r],80*v(r/i)+40,2)),n%i>0&&e[s]&&l.push(dt(s,e[s],s%i*80+40,3)),n%i<i-1&&e[a]&&l.push(dt(a,e[a],a%i*80+40,1)),l}(e,i,n),l=0;l<a.length;l++)if(a[l].direct==o){s=a[l];break}s||(s=a[v(b()*a.length)]),e.prepareDest=s}else-1!=o&&(e.direct=o)}if(!e.prepareDest&&!e.runing){var h=gt(e,i,n);h||(h=vt(e,i,n)),e.runTo(h)}e.playMovice(),e.run()})),this.pivot.set(t.x,t.y)}},i.prototype.clear=function(){this.box.removeChildren().forEach((function(t){return t.destroy()})),this.boxAnimal.removeChildren().forEach((function(t){return t.release()})),this.rat=null,this.cats=[]},i}(t.Container);function bt(t){return n(new xt,t,(function(){return[u("interactive=1").beginFill(0,.5).drawRect(0,0,M,W).endFill(),c("#box pivot.x=215 pivot.y=280 x=270 y="+W/2,[u("y=45").beginFill(z).drawRoundedRect(0,0,430,470,10).endFill(),u().beginFill(j).drawRoundedRect(65,0,300,90,10).endFill(),d("#title anchor=0.5 x=215 y=45",{fontSize:48}),d("#tips anchor=0.5 x=215 y=180",{fill:j,fontSize:24,align:"center"}),S(p("#iconReplay","replay.png"),430,515).center().target,p("@pointertap=onTap x=32 y=395","btn_replay.png",[p("#iconAd x=20 y=20","video.png"),d("#label anchor=0.5 x=215 y=40",{fontSize:30})])])]}))}var xt=function(t){function e(){t.apply(this,arguments),this.box=null,this.title=null,this.tips=null,this.label=null,this.iconAd=null,this.iconReplay=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onTap=function(){this.emit(this.enoughLife?"replay":"watch")},e.prototype.show=function(t,e){this.enoughLife=e,this.title.text=t,e?(this.tips.visible=!1,this.iconAd.visible=!1,this.iconReplay.visible=!0,this.label.text=Z("continue"),this.label.x=182):(this.tips.visible=!0,this.tips.text=Z("adTips"),this.iconAd.visible=!0,this.iconReplay.visible=!1,this.label.text=Z("watch"),this.label.x=215),this.box.scale.set(0),K(this.box.scale).to({x:1,y:1},300,q),this.visible=!0},e.prototype.close=function(){this.visible=!1},e}(t.Container);function mt(){return n(new wt,null,(function(){return[u().beginFill(0).drawRect(0,0,M,W).endFill(),c("#box",[u("#background @pointertap=onTap"),(t="#map @over=onGameOver @win=onWin",n(new yt,t,(function(){return[c("#box"),c("#boxAnimal")]})).created()),bt("#fail visible=0 @replay=onReplay @watch=onWatch"),p("#btnBack @pointertap=onBack y=15","btn_back.png"),p("#btnLife @pointertap=onOpenWatchAd y=15 x=410","btn_life.png",[d("#life x=75 y=14",{fill:B,fontSize:40})]),p("x=230 y=15 alpha=0.5","bg_label.png",[d("#level x=40 y=40 anchor=0.5",{fill:0,fontSize:40})])]),u("#curtain visible=0 x=270 y="+W/2).beginFill(0).drawCircle(0,0,W/2).endFill()];var t}))}var wt=function(e){function i(){e.apply(this,arguments),this.background=null,this.box=null,this.map=null,this.life=null,this.fail=null,this.curtain=null,this.btnBack=null,this.btnLife=null,this.level=null}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onBack=function(){O()},i.prototype.onOpenWatchAd=function(){},i.prototype.onWatch=function(){},i.prototype.onReplay=function(){this.map.replay(),this.fail.close(),this.start()},i.prototype.onWin=function(){var t=this;this.stop(),this.box.mask=this.curtain,this.curtain.visible=!0,K(this.curtain.scale).to({x:0,y:0},500).onComplete((function(){t.nextLevel()}))},i.prototype.nextLevel=function(){var t=this;if(this.currentLevel>=12)return this.box.mask=null,this.curtain.visible=!1,void O();this.currentLevel++,nt.level<this.currentLevel&&(nt.level=this.currentLevel),this.map.clear(),this.createMapByLevelId(this.currentLevel),K(this.curtain.scale).to({x:1,y:1},500).onComplete((function(){t.box.mask=null,t.curtain.visible=!1,t.start()}))},i.prototype.onGameOver=function(){this.fail.show(Z("fail"),nt.life>0),this.stop()},i.prototype.onTap=function(){this.map.changeDirect()},i.prototype.step=function(){this.map.run()},i.prototype.start=function(){t.Ticker.shared.add(this.step,this)},i.prototype.stop=function(){t.Ticker.shared.remove(this.step,this)},i.prototype.createMapByLevelId=function(t){this.level.text=t.toString();var e=H[t%H.length];this.background.clear().beginFill(e).drawRect(0,0,M,W).endFill();var i=function(t){return ct[t]}(t);this.map.createMap(i)},i.prototype.actived=function(t){this.btnBack.x=-85,K(this.btnBack).to({x:0},300,Y),this.btnLife.x=M,K(this.btnLife).to({x:410},300,Y),this.life.text=nt.life.toString(),this.currentLevel=t,this.createMapByLevelId(t),this.start()},i.prototype.deactived=function(){this.stop(),this.fail.close(),this.map.clear()},i}(t.Container),_t={info:{en:"Version: 1.0\nProducer: 大龙游\nEmail: cwloog@qq.com",cn:"版本：1.0\n制作人：大龙游\n邮箱：cwloog@qq.com",tw:"版本：1.0\n製作人：大龙游\n郵箱：cwloog@qq.com"},policy:{en:"Privacy Policy",cn:"隐私政策",tw:"隱私政策"},fail:{en:"FAILED!",cn:"失败!",tw:"失敗!"},continue:{en:"Continue",cn:"继续挑战",tw:"繼續挑戰"},watch:{en:"Watch Video",cn:"观看视频",tw:"觀看視頻"},adTips:{en:"Life will be restored tomorrow\nWatching the ad\nimmediately restores 30 lives",cn:"体力将在明天恢复\n观看广告\n立即恢复30点体力",tw:"體力將在明天恢復\n觀看廣告\n立即恢復30點體力"}};t.utils.skipHello(),t.settings.STRICT_TEXTURE_CACHE=!0,f={fill:16777215,fontSize:36,fontFamily:["sans-serif"]},w=M,_=W,window.onload=function(){J=_t,nt.init();var e=new t.Application({width:M,height:W,sharedLoader:!0,sharedTicker:!0,backgroundColor:16758605,resolution:window.devicePixelRatio||1}),i=window.innerWidth,n=window.innerHeight;i/n>.6?(e.view.style.width=n*(M/W)+"px",e.view.style.height=n+"px"):(e.view.style.width=i+"px",e.view.style.height=n+"px"),function(t,e){T=e,C=t}(e.stage,{Home:at,Level:ut,World:mt}),e.loader.baseUrl="./assets/",e.loader.add(["sprites.json","tile_road.png","tile_round.png","tile_win.png"]),e.loader.load((function(){D("Home")})),document.body.appendChild(e.view)}}(PIXI);
