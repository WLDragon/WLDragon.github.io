/*!
 * IndexBar.js
 * Copyright (c) 2016 WLDragon(cwloog@qq.com)
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.IndexBar=n()}(this,function(){"use strict";function e(e){var n=this;n.callback=e.callback;var t=document.querySelector(e.container),i={};for(var a in o)i[a]=e[a]||o[a];n.config=i;var r=t.clientHeight,l=document.createElement("ul");l.className="index-bar-container";for(var s=n.keys="string"==typeof i.keys?i.keys.split(""):i.keys,c=n.length=s.length,d=n.liHeight=~~(r/c),u=~~(.6*d),f="",p=0;p<c;p++)f+='<li style="line-height:'+d+"px;font-size:"+u+'px">'+s[p]+"</li>";l.innerHTML=f,n.children=l.children,t.appendChild(l),l.addEventListener("touchstart",function(e){e.preventDefault(),n.play(e.touches[0].pageY)}),l.addEventListener("touchmove",function(e){n.play(e.touches[0].pageY)}),window.addEventListener("touchend",function(e){n.stop()});var h=n.onMouseMove.bind(n);l.addEventListener("mousedown",function(e){window.addEventListener("mousemove",h),n.play(e.pageY)}),window.addEventListener("mouseup",function(e){window.removeEventListener("mousemove",h),n.stop()})}var n=document.createElement("style"),t=".index-bar-container { list-style-type: none; height: 100%; width: 100%; padding: 0; margin: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }.index-bar-container > li { text-align: center; pointer-events: none; }";n.appendChild(document.createTextNode(t)),document.head.appendChild(n);var o={keys:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",activeColor:"#39f",direction:"left",color:"#000",maxScale:4,offset:8},i=e.prototype;return i.play=function(e){for(var n=this,t=n.liHeight,o=~~(e/t),i=n.children,a=n.config,r=a.color,l=a.offset,s=a.maxScale,c=a.activeColor,d=n.length-1;d>=0;d--){var u=i[d],f=u.style,p=o-d;if(p>-4&&p<4){u._isPlayed=!0;var h=Math.abs((d+.5)*t-e),v=s-3*h/(3.5*t);f.transform="scale("+v+","+v+") translateX("+-l*v+"px)",0===p?(f.color=c,n.index!=o&&n.callback&&(n.callback(n.keys[o]),n.index=o)):f.color=r}else u._isPlayed&&(u._isPlayed=!1,f.color=r,f.transform="scale(1,1) translateX(0px)")}},i.stop=function(){for(var e=(this.config.color,this.children),n=this.length-1;n>=0;n--){var t=e[n];t._isPlayed&&(t._isPlayed=!1,t.style.transform="scale(1,1) translateX(0px)")}},i.onMouseMove=function(e){this.play(e.pageY)},e});